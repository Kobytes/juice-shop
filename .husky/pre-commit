echo "üîç V√©rification des secrets et vuln√©rabilit√©s..."
echo ""

# 1. D√©tection de secrets avec lint-staged (git-secrets + detect-secrets)
echo "üîê Scan des secrets avec lint-staged (git-secrets + detect-secrets)..."
npx lint-staged || {
  echo "‚ö†Ô∏è  Des secrets potentiels ont √©t√© d√©tect√©s (mais le commit continue pour d√©monstration)"
  true  # On continue m√™me avec l'√©chec, juste pour montrer
}
echo ""

# 2. Audit npm (affiche les vuln√©rabilit√©s sans les corriger)
echo "üîí Audit des vuln√©rabilit√©s npm..."
npm audit --audit-level=moderate 2>&1 || {
  echo ""
  echo "‚ö†Ô∏è  npm audit a d√©tect√© des vuln√©rabilit√©s (mais le commit continue pour d√©monstration)"
  echo "   Le projet Juice Shop contient intentionnellement des vuln√©rabilit√©s pour des fins √©ducatives."
  true  # On continue m√™me avec l'√©chec, juste pour montrer
}
echo ""
